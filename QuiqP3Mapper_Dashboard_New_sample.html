<!-- 
Copyright (c) 2026 kirakuda. All Rights Reserved.
This code is proprietary and confidential. 
-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiq P3 Mapper | Pipeline Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=Outfit:wght@800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1; --bg: #020617; --card-bg: rgba(15, 23, 42, 0.9);
            --text-main: #f8fafc; --text-dim: #94a3b8; --glass-border: rgba(255, 255, 255, 0.15);
            --color-jazz: #3b82f6; --color-beone: #10b981; --color-actual: #10b981; --color-estimated: #f59e0b;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg); color: var(--text-main); min-height: 100vh; padding: 3rem; line-height: 1.5; background-image: radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 100% 0%, rgba(16, 185, 129, 0.12) 0px, transparent 50%); }
        header { max-width: 1400px; margin: 0 auto 4rem auto; text-align: center; }
        h1 { font-family: 'Outfit', sans-serif; font-size: 4.5rem; font-weight: 900; background: linear-gradient(135deg, #60a5fa, #34d399); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: -0.05em; }
        
        .controls { background: var(--card-bg); border: 1px solid var(--glass-border); border-radius: 2rem; padding: 2.25rem; max-width: 1400px; margin: 0 auto 3.5rem auto; backdrop-filter: blur(40px); display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 2rem; align-items: end; box-shadow: 0 50px 100px -20px rgba(0,0,0,0.8); }
        .group { display: flex; flex-direction: column; gap: 0.8rem; }
        .label { font-size: 0.85rem; font-weight: 900; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.2em; }
        select, input { padding: 1.1rem 1.4rem; background: rgba(0, 0, 0, 0.7); border: 1px solid var(--glass-border); border-radius: 1.25rem; color: #fff; font-size: 1rem; outline: none; transition: 0.3s; }
        select:focus, input:focus { border-color: var(--primary); box-shadow: 0 0 0 5px rgba(99,102,241,0.25); transform: translateY(-3px); }

        .view-toggle { display: flex; background: rgba(0,0,0,0.6); padding: 0.4rem; border-radius: 1.25rem; border: 1px solid var(--glass-border); }
        .view-btn { flex: 1; padding: 1rem; border: none; background: transparent; color: var(--text-dim); font-weight: 900; cursor: pointer; border-radius: 1rem; transition: 0.3s; font-size: 1rem; }
        .view-btn.active { background: var(--primary); color: #fff; box-shadow: 0 5px 20px rgba(99,102,241,0.4); }

        /* Gantt Assets */
        .g-container { display: none; max-width: 1700px; margin: 0 auto; background: var(--card-bg); border: 1px solid var(--glass-border); border-radius: 2.5rem; overflow: hidden; backdrop-filter: blur(45px); box-shadow: 0 70px 150px -30px rgba(0,0,0,0.9); }
        .g-header { display: flex; border-bottom: 3px solid var(--glass-border); background: rgba(0,0,0,0.6); }
        .g-labels { width: 550px; flex-shrink: 0; padding: 2rem; font-weight: 950; color: var(--text-dim); text-transform: uppercase; border-right: 1px solid var(--glass-border); letter-spacing: 0.15em; }
        .g-time { flex-grow: 1; display: flex; }
        .year { flex: 1; text-align: center; padding: 2rem 0; font-size: 1.1rem; color: var(--text-dim); font-weight: 800; border-left: 1px dashed rgba(255,255,255,0.1); }
        .g-row { display: flex; border-bottom: 1px solid var(--glass-border); height: 120px; transition: 0.3s; }
        .g-row:hover { background: rgba(255,255,255,0.06); }
        .g-info { width: 550px; flex-shrink: 0; padding: 1.25rem 2.25rem; border-right: 1px solid var(--glass-border); display: flex; flex-direction: column; justify-content: center; }
        .company { font-weight: 950; font-size: 1.25rem; margin-bottom: 0.4rem; }
        .company.jazz { color: var(--color-jazz); }
        .company.beone { color: var(--color-beone); }
        .nct-link { color: var(--primary); font-family: 'Outfit', sans-serif; font-weight: 950; text-decoration: none; transition: 0.2s; }
        .nct-link:hover { text-decoration: underline; filter: brightness(1.2); }
        .g-meta { font-size: 0.9rem; color: var(--text-dim); font-weight: 600; margin-top: 0.25rem; }
        .p-badge { padding: 0.3rem 0.8rem; border-radius: 0.6rem; background: rgba(255,255,255,0.2); font-weight: 950; font-size: 0.8rem; margin-right: 1rem; }
        .g-bar-cell { flex-grow: 1; position: relative; }
        .bar { position: absolute; height: 40px; top: 40px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; padding: 0 1.8rem; font-size: 0.95rem; font-weight: 950; color: #fff; transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1); box-shadow: 0 12px 35px rgba(0,0,0,0.6); border: 1.5px solid rgba(255,255,255,0.2); }
        .bar:hover { transform: scale(1.02, 1.25); filter: brightness(1.4); z-index: 50; }
        .bar.jazz { background: linear-gradient(90deg, #2563eb, #60a5fa); }
        .bar.beone { background: linear-gradient(90deg, #059669, #34d399); }
        .marker { position: absolute; width: 0; height: 60px; border-left: 6px solid #fff; top: 30px; z-index: 10; filter: drop-shadow(0 0 12px #fff); cursor: pointer; transition: 0.2s; }
        .marker:hover { transform: scaleY(1.2); filter: brightness(1.5); }
        .status { display: inline-flex; align-items: center; justify-content: center; padding: 0.25rem 0.8rem; border-radius: 1.5rem; font-size: 0.75rem; font-weight: 950; margin-left: 0.75rem; text-transform: uppercase; }
        .status.A { background: var(--color-actual); color: #064e3b; box-shadow: 0 0 20px rgba(16,185,129,0.5); }
        .status.E { background: var(--color-estimated); color: #451a03; box-shadow: 0 0 20px rgba(245,158,11,0.5); }
        .status-label { font-size: 0.7rem; opacity: 0.7; font-weight: 800; text-transform: uppercase; margin-left: 0.25rem; vertical-align: middle; }

        .readout { margin-top: 1.5rem; background: rgba(59,130,246,0.1); border: 2px solid rgba(59,130,246,0.3); border-radius: 1.5rem; padding: 1.5rem; }
        .intel-tag { font-weight: 950; font-size: 0.85rem; text-transform: uppercase; color: #60a5fa; margin-bottom: 0.6rem; display: block; letter-spacing: 0.15em; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(550px, 1fr)); gap: 3rem; max-width: 1700px; margin: 0 auto; }
        .card { background: var(--card-bg); border: 3px solid var(--glass-border); border-radius: 2.5rem; padding: 3rem; backdrop-filter: blur(50px); transition: 0.5s cubic-bezier(0.165,0.84,0.44,1); }
        .card:hover { transform: translateY(-15px); border-color: var(--primary); box-shadow: 0 80px 160px -40px rgba(0,0,0,0.9); }

        .tip { position: absolute; background: #0f172a; color: #fff; padding: 2.25rem; border-radius: 2rem; z-index: 9999; opacity: 0; pointer-events: none; border: 2px solid var(--glass-border); box-shadow: 0 70px 140px -40px #000; max-width: 550px; backdrop-filter: blur(40px); transition: 0.3s cubic-bezier(0.4,0,0.2,1); }

        /* --- MOBILE RESPONSIVENESS --- */
        @media (max-width: 768px) {
            body { padding: 1.5rem; }
            h1 { font-size: 2.8rem; letter-spacing: -0.02em; }
            header { margin-bottom: 2.5rem; }
            
            header > div:nth-of-type(1) { gap: 3rem !important; margin-top: 2rem !important; flex-wrap: wrap; }
            #stat-assets, #stat-p3 { font-size: 3.5rem !important; }

            .controls { padding: 1.5rem; margin-top: 3.5rem !important; grid-template-columns: 1fr; gap: 1.5rem; border-radius: 1.5rem; }
            
            .grid { grid-template-columns: 1fr; gap: 2rem; }
            .card { padding: 2rem; border-radius: 2rem; }
            .card div:nth-of-type(2) { font-size: 1.5rem !important; }

            .view-toggle { margin-top: 0.5rem; }

            .g-container { border-radius: 1.5rem; }
            .g-header { overflow-x: auto; -webkit-overflow-scrolling: touch; }
            .g-labels { width: 220px; padding: 1.25rem; font-size: 0.8rem; }
            .g-info { width: 220px; padding: 1rem; }
            .company { font-size: 1.1rem; }
            .g-meta { font-size: 0.8rem; }
            .p-badge { margin-right: 0.5rem; padding: 0.2rem 0.6rem; }
            
            #gantt { overflow-x: auto; -webkit-overflow-scrolling: touch; }
            #g-rows { min-width: 1000px; } /* Force width to allow scrolling */
            .g-header { min-width: 1000px; }
            
            .tip { max-width: 90vw; padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Quiq P3 Mapper</h1>
        <div style="display:flex; gap:10rem; justify-content:center; margin-top:4rem;">
            <div style="text-align:center;"><div id="stat-assets" style="font-size:5rem; font-weight:950; font-family:'Outfit'; line-height:1;">0</div><div style="font-size:1rem; font-weight:950; color:var(--text-dim); text-transform:uppercase; letter-spacing:0.3em; margin-top:1.25rem;">Pipeline Assets</div></div>
            <div style="text-align:center;"><div id="stat-p3" style="font-size:5rem; font-weight:950; font-family:'Outfit'; line-height:1;">0</div><div style="font-size:1rem; font-weight:950; color:var(--text-dim); text-transform:uppercase; letter-spacing:0.3em; margin-top:1.25rem;">Active P3</div></div>
        </div>
        <div class="controls" style="margin-top:6rem;">
            <div class="group"><span class="label">Quick Search</span><input type="text" id="s-in" placeholder="Drug, NCT ID, Indication..."></div>
            <div class="group"><span class="label">Sponsor</span><select id="f-co"><option value="all">All Organizations</option><option value="BeOne Medicines">BeOne Medicines</option><option value="Jazz Pharmaceuticals">Jazz Pharmaceuticals</option></select></div>
            <div class="group"><span class="label">Target Asset</span><select id="f-im"><option value="all">All Investigational Products</option><option value="BGB-16673">BGB-16673</option><option value="Dordaviprone (ONC201)">Dordaviprone (ONC201)</option><option value="Intravenous Tislelizumab">Intravenous Tislelizumab</option><option value="Sonrotoclax">Sonrotoclax</option><option value="Subcutaneous Tislelizumab">Subcutaneous Tislelizumab</option><option value="Tislelizumab">Tislelizumab</option><option value="Zanidatamab">Zanidatamab</option><option value="Zanubrutinib">Zanubrutinib</option></select></div>
            <div class="group">
                <span class="label">View Intel</span>
                <div class="view-toggle">
                    <button class="view-btn active" data-v="grid">Card View</button>
                    <button class="view-btn" data-v="gantt">Time Mapper</button>
                </div>
            </div>
        </div>
    </header>

    <div class="grid" id="grid"></div>
    <div class="g-container" id="gantt">
        <div class="g-header"><div class="g-labels">Asset Intelligence Record</div><div class="g-time" id="g-years"></div></div>
        <div id="g-rows"></div>
    </div>
    <div id="tip" class="tip"></div>

    <script>
        const rawData = [
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT05707377",
    "title": "A Study to Examine the Efficacy and Safety of Zanubrutinib Given to Adults With Primary Membranous Nephropathy",
    "phase": "PHASE3",
    "imp_raw": "Zanubrutinib",
    "sample_size": "178",
    "indications": "Primary Membranous Nephropathy",
    "start_year": "2023",
    "start_date_iso": "2023-04-17",
    "primary_completion_date_iso": "2027-10",
    "completion_date_iso": "2027-10",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "A",
    "actual_company": "BeOne Medicines",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "Zanubrutinib"
  },
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT06073821",
    "title": "Study of Sonrotoclax (BGB-11417) Plus Zanubrutinib (BGB-3111) Compared With Venetoclax Plus Obinutuzumab in Participants With Chronic Lymphocytic Leukemia (CLL)",
    "phase": "PHASE3",
    "imp_raw": "Sonrotoclax, Zanubrutinib",
    "sample_size": "652",
    "indications": "",
    "start_year": "2023",
    "start_date_iso": "2023-11-11",
    "primary_completion_date_iso": "2032-02",
    "completion_date_iso": "2032-12",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "BeOne Medicines",
    "readout_summary": "Ongoing Phase 3. Phase 1/2 data (ASH 2025) confirms potential across B-cell malignancies. Medical info and study designs available on official clinical hub.",
    "readout_source": "BeOne Medicines Investor Relations",
    "source_url": "https://ir.beonemedicines.com/news-events/pressreleases",
    "imp": "Sonrotoclax, Zanubrutinib"
  },
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT06742996",
    "title": "A Study to Investigate the Efficacy and Safety of Sonrotoclax Plus Zanubrutinib Compared With Placebo Plus Zanubrutinib in Adults With Relapsed/Refractory Mantle Cell Lymphoma (CELESTIAL-RRMCL)",
    "phase": "PHASE3",
    "imp_raw": "Sonrotoclax, Zanubrutinib",
    "sample_size": "300",
    "indications": "Mantle Cell Lymphoma, B Cell Lymphoma",
    "start_year": "2025",
    "start_date_iso": "2025-03-05",
    "primary_completion_date_iso": "2028-08-31",
    "completion_date_iso": "2032-03-30",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "BeOne Medicines",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "Sonrotoclax, Zanubrutinib"
  },
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT06846671",
    "title": "A Study of BGB-16673 Compared to Investigator's Choice in Participants With Chronic Lymphocytic Leukemia or Small Lymphocytic Lymphoma Previously Exposed to Both Bruton Tyrosine Kinase (BTK) and B-cell Leukemia/Lymphoma 2 Protein (BCL2) Inhibitors",
    "phase": "PHASE3",
    "imp_raw": "BGB-16673",
    "sample_size": "250",
    "indications": "CLL, Chronic Lymphocytic Leukemia",
    "start_year": "2025",
    "start_date_iso": "2025-04-10",
    "primary_completion_date_iso": "2028-05-15",
    "completion_date_iso": "2030-02-14",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "BeOne Medicines",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "BGB-16673"
  },
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT06970743",
    "title": "A Study of BGB-16673 Compared to Investigator's Choice in Participants With Relapsed/Refractory Chronic Lymphocytic Leukemia or Small Lymphocytic Lymphoma Previously Exposed to Covalent Bruton Tyrosine Kinase (BTK) Inhibitors",
    "phase": "PHASE3",
    "imp_raw": "BGB-16673",
    "sample_size": "150",
    "indications": "Chronic Lymphocytic Leukemia, Small Lymphocytic Lymphoma",
    "start_year": "2025",
    "start_date_iso": "2025-05-29",
    "primary_completion_date_iso": "2029-11-30",
    "completion_date_iso": "2029-11-30",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "BeOne Medicines",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "BGB-16673"
  },
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT07043400",
    "title": "A Study to Investigate Tislelizumab Administered as Subcutaneous Injection Versus Intravenous Infusion Plus Chemotherapy in Patients With Unresectable or Metastatic Gastric or Gastroesophageal Junction Adenocarcinoma",
    "phase": "PHASE3",
    "imp_raw": "Subcutaneous Tislelizumab, Intravenous Tislelizumab",
    "sample_size": "351",
    "indications": "Metastatic Gastric Adenocarcinoma, Gastroesophageal Junction Adenocarcinoma",
    "start_year": "2025",
    "start_date_iso": "2025-08-27",
    "primary_completion_date_iso": "2027-10-30",
    "completion_date_iso": "2028-04-22",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "BeOne Medicines",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "Subcutaneous Tislelizumab, Intravenous Tislelizumab"
  },
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT06973187",
    "title": "A Study to Evaluate the Safety and Efficacy of BGB-16673 Compared to Pirtobrutinib in Adults With Relapsed/Refractory Chronic Lymphocytic Leukemia or Small Lymphocytic Lymphoma",
    "phase": "PHASE3",
    "imp_raw": "BGB-16673",
    "sample_size": "500",
    "indications": "Chronic Lymphocytic Leukemia, Small Lymphocytic Lymphoma",
    "start_year": "2025",
    "start_date_iso": "2025-09-04",
    "primary_completion_date_iso": "2028-04-17",
    "completion_date_iso": "2028-04-17",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "BeOne Medicines",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "BGB-16673"
  },
  {
    "company": "BeOne Medicines",
    "nct_id": "NCT07277231",
    "title": "A Study to Investigate Sonrotoclax (BGB-11417) Plus Zanubrutinib (BGB-3111) Compared With Venetoclax Plus Acalabrutinib in Adults With Previously Untreated Chronic Lymphocytic Leukemia",
    "phase": "PHASE3",
    "imp_raw": "Sonrotoclax, Zanubrutinib",
    "sample_size": "500",
    "indications": "Chronic Lymphocytic Leukemia",
    "start_year": "2026",
    "start_date_iso": "2026-01-31",
    "primary_completion_date_iso": "2031-02",
    "completion_date_iso": "2031-11",
    "start_date_type": "E",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "BeOne Medicines",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "Sonrotoclax, Zanubrutinib"
  },
  {
    "company": "Jazz Pharmaceuticals",
    "nct_id": "NCT05152147",
    "title": "A Study of Zanidatamab in Combination With Chemotherapy Plus or Minus Tislelizumab in Patients With HER2-positive Advanced or Metastatic Gastric and Esophageal Cancers",
    "phase": "PHASE3",
    "imp_raw": "Zanidatamab, Tislelizumab",
    "sample_size": "920",
    "indications": "Gastric Neoplasms, Gastroesophageal Adenocarcinoma, Esophageal Adenocarcinoma",
    "start_year": "2021",
    "start_date_iso": "2021-12-02",
    "primary_completion_date_iso": "2026-07-31",
    "completion_date_iso": "2027-07-31",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "A",
    "actual_company": "Jazz Pharmaceuticals",
    "readout_summary": "Positive Phase 3 top-line results (Nov 2025): Median PFS 12.4m vs 8.1m. Median OS 26.4m (7.2m improvement). 37% reduction in risk of progression/death. Experts hail results as practice-changing for HER2+ 1L GEA.",
    "readout_source": "Jazz Pharmaceuticals Investor Relations",
    "source_url": "https://investor.jazzpharma.com/news",
    "imp": "Zanidatamab, Tislelizumab"
  },
  {
    "company": "Jazz Pharmaceuticals",
    "nct_id": "NCT05580562",
    "title": "ONC201 in H3 K27M-mutant Diffuse Glioma Following Radiotherapy (the ACTION Study)",
    "phase": "PHASE3",
    "imp_raw": "Dordaviprone (ONC201)",
    "sample_size": "450",
    "indications": "H3 K27M, Glioma",
    "start_year": "2023",
    "start_date_iso": "2023-01-23",
    "primary_completion_date_iso": "2026-08",
    "completion_date_iso": "2026-08",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "Jazz Pharmaceuticals",
    "readout_summary": "FDA Accelerated Approval granted (Modeyso) in Aug 2025 for R/R H3 K27M-mutant glioma. Confirmatory Phase 3 ACTION study ongoing. First and only FDA-approved treatment for this aggressive brain tumor.",
    "readout_source": "Jazz Pharmaceuticals Investor Relations",
    "source_url": "https://investor.jazzpharma.com/news",
    "imp": "Dordaviprone (ONC201)"
  },
  {
    "company": "Jazz Pharmaceuticals",
    "nct_id": "NCT06282575",
    "title": "Efficacy and Safety of Zanidatamab With Standard-of-care Therapy Against Standard-of-care Therapy for Advanced HER2-positive Biliary Tract Cancer",
    "phase": "PHASE3",
    "imp_raw": "Zanidatamab",
    "sample_size": "286",
    "indications": "Biliary Tract Cancer",
    "start_year": "2024",
    "start_date_iso": "2024-07-19",
    "primary_completion_date_iso": "2028-12-01",
    "completion_date_iso": "2030-04-01",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "Jazz Pharmaceuticals",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "Zanidatamab"
  },
  {
    "company": "Jazz Pharmaceuticals",
    "nct_id": "NCT06435429",
    "title": "A Study Comparing the Efficacy and Safety of Zanidatamab to Trastuzumab, Each in Combination With Physician's Choice Chemotherapy, for the Treatment of Participants With Metastatic HER2-positive Breast Cancer",
    "phase": "PHASE3",
    "imp_raw": "Zanidatamab",
    "sample_size": "550",
    "indications": "Metastatic HER2-positive Breast Cancer",
    "start_year": "2024",
    "start_date_iso": "2024-08-13",
    "primary_completion_date_iso": "2028-09-26",
    "completion_date_iso": "2031-11-26",
    "start_date_type": "A",
    "primary_completion_date_type": "E",
    "completion_date_type": "E",
    "enrollment_type": "E",
    "actual_company": "Jazz Pharmaceuticals",
    "readout_summary": "",
    "readout_source": "",
    "source_url": "",
    "imp": "Zanidatamab"
  }
];
        const grid = document.getElementById('grid'), gantt = document.getElementById('gantt'), gRows = document.getElementById('g-rows'), gYears = document.getElementById('g-years'), tip = document.getElementById('tip');
        let filters = { s: '', co: 'all', im: 'all', v: 'grid' };

        function getCls(n) { const l = n.toLowerCase(); return l.includes('jazz') ? 'jazz' : (l.includes('beone') || l.includes('beigene') ? 'beone' : 'other'); }

        function render() {
            const search = filters.s.toLowerCase().trim();
            const nctSearch = search.replace(/^nct\s*/, '').replace(/\s/g, ''); // Fuzzy NCT (ignore prefix/spaces)
            const partialSearch = search.length >= 4 ? search.substring(0, 4) : search;

            const data = rawData.filter(i => {
                const iTitle = i.title.toLowerCase();
                const iInd = i.indications.toLowerCase();
                const iCo = i.actual_company.toLowerCase();
                const iNct = i.nct_id.toLowerCase().replace(/^nct/, '');

                // Flexible Search Logic
                const matchNct = nctSearch && iNct.includes(nctSearch);
                const matchPartialInd = partialSearch && iInd.includes(partialSearch);
                const matchPartialCo = partialSearch && iCo.includes(partialSearch);
                const matchPlain = search && (iTitle.includes(search) || i.imp.toLowerCase().includes(search));
                
                const ms = !search || matchNct || matchPartialInd || matchPartialCo || matchPlain;
                
                const mc = filters.co === 'all' || i.actual_company === filters.co;
                const mi = filters.im === 'all' || (i.imp && i.imp.includes(filters.im));
                return ms && mc && mi;
            });

            const stats = calculateStats(data);
            document.getElementById('stat-assets').textContent = stats.assets;
            document.getElementById('stat-p3').textContent = stats.p3;

            if (filters.v === 'grid') { grid.style.display = 'grid'; gantt.style.display = 'none'; renderGrid(data); }
            else { grid.style.display = 'none'; gantt.style.display = 'block'; renderGantt(data); }
        }

        function calculateStats(data) {
            return {
                assets: data.length,
                p3: data.filter(d => d.phase.includes('PHASE3')).length
            };
        }

        function renderGrid(data) {
            grid.innerHTML = data.length ? '' : '<div style="grid-column:1/-1; text-align:center; padding:15rem; font-size:2rem; font-weight:950; color:var(--text-dim);">No Assets Found.</div>';
            data.forEach(i => {
                const cls = getCls(i.actual_company);
                const rd = i.readout_summary ? `<div class="readout"><span class="intel-tag">Asset Intel</span>${i.readout_summary}${i.source_url ? `<a href="${i.source_url}" target="_blank" style="display:block; margin-top:1.25rem; color:var(--primary); font-weight:950; text-decoration:none;">View Official PR →</a>` : ''}</div>` : '';
                const d = document.createElement('div'); d.className = 'card';
                d.innerHTML = `
                    <div class="company ${cls}" style="text-transform:uppercase; margin-bottom:1.5rem;">${i.actual_company}</div>
                    <div style="font-size:1.8rem; font-weight:950; color:#fff; margin-bottom:2rem; line-height:1.3; letter-spacing:-0.04em;">${i.title}</div>
                    <div style="margin-bottom:2.5rem; display:flex; gap:1.5rem; align-items:center; flex-wrap:wrap;">
                        <span class="p-badge">${i.phase}</span>
                        <a href="https://clinicaltrials.gov/study/${i.nct_id}" target="_blank" class="nct-link" style="font-size:1.1rem;">${i.nct_id}</a>
                    </div>
                    ${rd}
                    <div style="margin-top:2.5rem; padding-top:2rem; border-top:2px solid var(--glass-border);">
                        <p style="margin-bottom:0.8rem;"><span class="label" style="font-size:0.75rem;">Pipeline IMP:</span> <b style="color:#fff; font-weight:950;">${i.imp || 'Pipeline Targeted'}</b></p>
                        <p style="margin-bottom:0.8rem;"><span class="label" style="font-size:0.75rem;">Study Start:</span> <b style="color:#fff; font-weight:950;">${formatDate(i.start_date_iso)}</b> <span class="status-label">${i.start_date_type === 'A' ? '(Actual)' : '(Estimated)'}</span></p>
                        <p style="margin-bottom:0.8rem;"><span class="label" style="font-size:0.75rem;">Primary Readout:</span> <b style="color:#fff; font-weight:950;">${formatDate(i.primary_completion_date_iso)}</b> <span class="status-label">${i.primary_completion_date_type === 'A' ? '(Actual)' : '(Estimated)'}</span></p>
                        <p><span class="label" style="font-size:0.75rem;">Study End:</span> <b style="color:#fff; font-weight:950;">${formatDate(i.completion_date_iso)}</b> <span class="status-label">${i.completion_date_type === 'A' ? '(Actual)' : '(Estimated)'}</span></p>
                    </div>
                `;
                grid.appendChild(d);
            });
        }

        function renderGantt(data) {
            const dates = []; data.forEach(d => { if(d.start_date_iso) dates.push(new Date(d.start_date_iso)); if(d.completion_date_iso) dates.push(new Date(d.completion_date_iso)); });
            if(!dates.length) return;
            let min = new Date(Math.min(...dates)), max = new Date(Math.max(...dates));
            min.setMonth(min.getMonth()-15); max.setMonth(max.getMonth()+15);
            const range = max - min;
            gYears.innerHTML = ''; for(let y=min.getFullYear(); y<=max.getFullYear(); y++) { const yr = document.createElement('div'); yr.className = 'year'; yr.textContent = y; gYears.appendChild(yr); }
            gRows.innerHTML = '';
            data.forEach(i => {
                const cls = getCls(i.actual_company);
                const s = new Date(i.start_date_iso), p = new Date(i.primary_completion_date_iso), e = new Date(i.completion_date_iso);
                let bar = '', marker = '';
                if(s && e) {
                    const l = ((s-min)/range)*100, w = ((e-s)/range)*100;
                    bar = `<div class="bar ${cls}" style="left:${l}%; width:${w}%" 
                              onmouseover="showTip(event, \`${i.actual_company}\`, \`${i.title.replace(/'/g,"\\'")}\`, '${i.start_date_iso}', '${i.completion_date_iso}', \`${(i.readout_summary||'').replace(/'/g,"\\'")}\`, '${i.readout_source}', '${i.primary_completion_date_iso}', '${i.primary_completion_date_type}')" 
                              onmouseout="hideTip()">N: ${i.sample_size} (${i.enrollment_type})</div>`;
                    if(p >= s && p <= e) {
                        const pl = ((p-min)/range)*100;
                        marker = `<div class="marker" style="left:${pl}%; border-color:${i.primary_completion_date_type==='A'?'#10b981':'#fff'}" ${i.source_url ? `onclick="window.open('${i.source_url}', '_blank')"` : ''}></div>`;
                    }
                }
                const r = document.createElement('div'); r.className = 'g-row';
                r.innerHTML = `<div class="g-info"><div class="company ${cls}">${i.actual_company}</div><div class="g-meta"><span class="p-badge">${i.phase}</span><a href="https://clinicaltrials.gov/study/${i.nct_id}" target="_blank" class="nct-link">${i.nct_id}</a> | ${i.indications.split(',')[0].slice(0,35)}...</div></div><div class="g-bar-cell">${bar}${marker}</div>`;
                gRows.appendChild(r);
            });
        }

        function showTip(e, co, ti, s, comp, rd, src, p_date, p_type) {
            tip.style.opacity = '1';
            const readout = rd ? `<div style="margin-top:1.5rem; padding-top:1.5rem; border-top:2px solid rgba(255,255,255,0.1);"><span class="intel-tag">Asset Intel</span><div style="font-size:1.1rem; font-weight:600; color:#bfdbfe; line-height:1.6;">${rd}</div><div style="text-align:right; font-size:0.85rem; color:var(--text-dim); font-style:italic; margin-top:1rem;">— ${src}</div></div>` : '';
            const p_status = p_type === 'A' ? '<span style="color:var(--color-actual); font-size:0.8rem;">(Actual)</span>' : '<span style="color:var(--color-estimated); font-size:0.8rem;">(Estimated)</span>';
            
            tip.innerHTML = `
                <div class="company ${getCls(co)}" style="font-size:1.4rem; margin-bottom:1rem;">${co}</div>
                <div style="font-weight:950; font-size:1.25rem; color:#fff; line-height:1.4; margin-bottom:1.5rem;">${ti}</div>
                <div style="display:flex; flex-direction:column; gap:0.5rem; padding:1.5rem; background:rgba(255,255,255,0.08); border-radius:1.5rem; font-weight:800; font-size:1.1rem;">
                    <div>Trial Span: <span style="color:#fff">${s}</span> to <span style="color:#fff">${comp}</span></div>
                    <div>Primary Readout: <span style="color:#fff">${p_date}</span> ${p_status}</div>
                </div>
                ${readout}`;
            moveTip(e);
        }
        function formatDate(d) { if(!d) return 'TBD'; return d; }
        function hideTip() { tip.style.opacity = '0'; }
        function moveTip(e) {
            let x = e.pageX + 40, y = e.pageY + 40; tip.style.left = x + 'px'; tip.style.top = y + 'px';
            const rect = tip.getBoundingClientRect();
            if (x + rect.width > window.innerWidth - 50) tip.style.left = (e.pageX - rect.width - 40) + 'px';
            if (y + rect.height > window.innerHeight + window.scrollY - 50) tip.style.top = (e.pageY - rect.height - 40) + 'px';
        }

        document.getElementById('s-in').addEventListener('input', e => { filters.s = e.target.value; render(); });
        document.getElementById('f-co').addEventListener('change', e => { filters.co = e.target.value; render(); });
        document.getElementById('f-im').addEventListener('change', e => { filters.im = e.target.value; render(); });
        document.querySelectorAll('.view-btn').forEach(b => b.addEventListener('click', () => { document.querySelectorAll('.view-btn').forEach(x => x.classList.remove('active')); b.classList.add('active'); filters.v = b.dataset.v; render(); }));
        document.addEventListener('mousemove', e => { if(tip.style.opacity === '1') moveTip(e); });
        render();
    </script>
</body>
</html>
    